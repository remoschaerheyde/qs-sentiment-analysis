{"version":3,"file":"halyard.js","sources":["../src/utils/utils.js","../src/connections/connection-base.js","../src/connections/file.js","../src/connections/web-file.js","../src/connections/inline-data.js","../src/connections.js","../src/utils/json-to-csv.js","../src/connection-matcher.js","../src/default-connection-matcher.js","../src/utils/format-specification.js","../src/table.js","../src/utils/hyper-cube-specification.js","../src/utils/hyper-cube-utils.js","../src/hyper-cube.js","../src/set-statement.js","../src/derived-fields-template.js","../src/calendar-derived-fields.js","../src/halyard.js"],"sourcesContent":["/**\r\n * Get folder path from file path\r\n * @private\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\nexport function folderPath(path) {\r\n  let folderPathMatch = path.match(/^(.*)(\\\\.*\\..*$|\\\\.*)$/);\r\n\r\n  if (folderPathMatch) {\r\n    return folderPathMatch[1];\r\n  }\r\n\r\n  // Unix file path check\r\n  folderPathMatch = path.match(/^(.*)(\\/.*\\..*$|\\/.*)$/);\r\n\r\n  return folderPathMatch && folderPathMatch[1];\r\n}\r\n\r\n/**\r\n * Get file name from file path\r\n * @private\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\nexport function fileName(path) {\r\n  let fileNameMatch = path.match(/^.*\\\\(.*\\..*|.*)$/);\r\n\r\n  if (fileNameMatch) {\r\n    return fileNameMatch[1];\r\n  }\r\n\r\n  fileNameMatch = path.match(/^.*\\/(.*\\..*|.*)$/);\r\n\r\n  return fileNameMatch && fileNameMatch[1];\r\n}\r\n\r\n/**\r\n * Get file extension from file path\r\n * @private\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\nexport function fileExtension(path) {\r\n  const fileExtensionMatch = path.match(/^.*\\.(.*)$/);\r\n\r\n  return fileExtensionMatch && fileExtensionMatch[1];\r\n}\r\n\r\n/**\r\n * Escape text with double quotes\r\n * @private\r\n * @param {string} text\r\n * @returns {string}\r\n */\r\nexport function escapeText(text) {\r\n  return text.replace(/\"/g, '\"\"');\r\n}\r\n\r\n/**\r\n * Get a unique name\r\n * @private\r\n * @returns {string}\r\n */\r\nexport function uniqueName() {\r\n  /* eslint no-bitwise: [\"off\"] */\r\n  /* eslint no-mixed-operators: [\"off\"] */\r\n\r\n  return 'xxxxx-8xxxx-yxxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n    const r = (Math.random() * 16) | 0;\r\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * Validate the field type\r\n * @private\r\n * @param {string} type\r\n * @returns {boolean}\r\n */\r\nexport function validFieldType(type) {\r\n  const validFieldTypes = ['time', 'timestamp', 'date', 'interval'];\r\n\r\n  type = type || '';\r\n\r\n  return validFieldTypes.indexOf(type.toLowerCase()) > -1;\r\n}\r\n\r\n/**\r\n * Get indentation characters\r\n * @private\r\n * @returns {string}\r\n */\r\nexport function indentation() {\r\n  return '  ';\r\n}\r\n\r\n/**\r\n * Get the field name\r\n * @private\r\n * @param {Field} field\r\n * @returns {string}\r\n */\r\nexport function getFieldName(field) {\r\n  return field.name || field.src;\r\n}\r\n","import { uniqueName } from '../utils/utils';\r\n\r\n/**\r\n * A base set of methods used by Connections\r\n * @typedef {object} Connection\r\n * @property {string} path - The Path to a resource\r\n * @property {string} connectionType - The type can be either 'folder' or 'internet'\r\n */\r\n\r\nclass ConnectionBase {\r\n  /**\r\n   * A base set of methods used by Connections\r\n   * @public\r\n   * @param {string} path - The Path to a resource\r\n   * @param {string} connectionType - The type can be either 'folder' or 'internet'\r\n   * @class\r\n   */\r\n  constructor(path, connectionType) {\r\n    this.path = path;\r\n    this.connectionType = connectionType;\r\n    this.fileExtension = '';\r\n  }\r\n\r\n  /**\r\n   * Returns specified file extension.\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getFileExtension() {\r\n    return this.fileExtension;\r\n  }\r\n\r\n  /**\r\n   * Get specified connection type.\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getConnectionType() {\r\n    return this.connectionType;\r\n  }\r\n\r\n  /**\r\n   * Get the QIX representation of a connection.\r\n   * @public\r\n   * @returns {{qName: (string), qConnectionString: (string), qType: (string)}}\r\n   */\r\n  getQixConnectionObject() {\r\n    return {\r\n      qName: this.getName(),\r\n      qConnectionString: this.path,\r\n      qType: this.getConnectionType(),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get the name and if nothing is set then it will receive a unique name\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getName() {\r\n    if (!this.name) {\r\n      this.name = uniqueName();\r\n    }\r\n\r\n    return this.name;\r\n  }\r\n\r\n  /**\r\n   * Get the lib statement used in the load script to connect to a connection\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getLibStatement() {\r\n    return `lib://${this.getName()}`;\r\n  }\r\n\r\n  /**\r\n   * Get the load script for this connection\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getScript() {\r\n    return `FROM [${this.getLibStatement()}]`;\r\n  }\r\n}\r\n\r\nexport default ConnectionBase;\r\n","import ConnectionBase from './connection-base';\r\nimport * as Utils from '../utils/utils';\r\n\r\nclass FileConnection extends ConnectionBase {\r\n  /**\r\n   * File Connection representation. It will create a folder connection in QIX.\r\n   * @public\r\n   * @param {string} path - Absolute file path\r\n   * @constructor\r\n   */\r\n  constructor(path) {\r\n    super(Utils.folderPath(path), 'folder');\r\n\r\n    this.fileName = Utils.fileName(path);\r\n\r\n    this.fileExtension = Utils.fileExtension(path) || 'txt';\r\n  }\r\n\r\n  /**\r\n   * Get the lib statement for the specified file path\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getLibStatement() {\r\n    return `${super.getLibStatement()}/${this.fileName}`;\r\n  }\r\n}\r\n\r\nexport default FileConnection;\r\n","import ConnectionBase from './connection-base';\r\n\r\nclass WebFileConnection extends ConnectionBase {\r\n  /**\r\n   * Web file connector structure. It will setup everything to create a QIX internet connection.\r\n   * @public\r\n   * @param {string} url\r\n   * @param {string} fileExtension\r\n   */\r\n  constructor(url, fileExtension) {\r\n    super(url, 'internet');\r\n\r\n    const fileExtensionMatch = url.match(/^https?:\\/\\/.*\\/.*\\.(\\w*)\\?.*$/)\r\n      || url.match(/^https?:\\/\\/.*\\/.*\\.(\\w*)$/);\r\n\r\n    this.fileExtension = fileExtension || (fileExtensionMatch && fileExtensionMatch[1]) || 'html';\r\n  }\r\n}\r\nexport default WebFileConnection;\r\n","import ConnectionBase from './connection-base';\r\nimport * as Utils from '../utils/utils';\r\n\r\nclass InlineData extends ConnectionBase {\r\n  /**\r\n   * Inline data representation. This is typically CSV formatted data.\r\n   * @public\r\n   * @param {string} data\r\n   * @constructor\r\n   */\r\n  constructor(data) {\r\n    super();\r\n\r\n    this.data = data;\r\n\r\n    this.fileExtension = 'txt';\r\n  }\r\n\r\n  /**\r\n   * Get the load script representation\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getScript() {\r\n    return `INLINE \"\\n${Utils.escapeText(this.data)}\\n\"`;\r\n  }\r\n\r\n  /**\r\n   * Get lib statement but there are none for inline data\r\n   * @private\r\n   */\r\n  getLibStatement() {\r\n  }\r\n\r\n  /**\r\n   * Get the QAE connection object but there are none for inline data\r\n   * @private\r\n   */\r\n  getQixConnectionObject() {\r\n  }\r\n}\r\n\r\nexport default InlineData;\r\n","import FileConnection from './connections/file';\r\nimport WebConnection from './connections/web-file';\r\nimport InlineData from './connections/inline-data';\r\n\r\n/**\r\n * Default set of Connections that are available\r\n * @constant\r\n * @type {object}\r\n */\r\nexport default {\r\n  File: FileConnection,\r\n  Web: WebConnection,\r\n  Inline: InlineData,\r\n};\r\n","/**\r\n * Escape values containing delimiter\r\n * @private\r\n * @param {string} data\r\n * @param {string} delimiter\r\n * @returns {string}\r\n */\r\nfunction escapeValueContainingDelimiter(data, delimiter) {\r\n  if (data && typeof data === 'string' && (data.indexOf(delimiter) > -1 || data.indexOf('\\n') > -1)) {\r\n    return `\"${data.replace(/\"/g, '\"\"').replace(/\\n/g, ' ')}\"`;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n/**\r\n * Convert array date to a string in a csv format\r\n * @private\r\n * @param {array} data\r\n * @returns {string}\r\n */\r\nexport function convert(data) {\r\n  if (data instanceof Array === false) {\r\n    data = [data];\r\n  }\r\n\r\n  let csv = '';\r\n  const delimiter = ',';\r\n\r\n  const headers = Object.keys(data[0]);\r\n\r\n  csv = `${csv + headers.map(header => escapeValueContainingDelimiter(header, delimiter))\r\n    .join(delimiter)}\\n`;\r\n\r\n  let fields = [];\r\n\r\n  for (let i = 0; i < data.length; i += 1) {\r\n    fields = [];\r\n\r\n    for (let j = 0; j < headers.length; j += 1) {\r\n      fields.push(escapeValueContainingDelimiter(data[i][headers[j]], delimiter));\r\n    }\r\n\r\n    csv = `${csv + fields.join(delimiter)}\\n`;\r\n  }\r\n\r\n  csv = csv.slice(0, -('\\n'.length));\r\n\r\n  return csv;\r\n}\r\n\r\n/**\r\n * Validate that the data is an JSON array\r\n * @private\r\n * @param {array} data\r\n * @returns {boolean}\r\n */\r\nexport function isJson(data) {\r\n  if (data instanceof Array) {\r\n    if (data[0] && typeof data[0] === 'object') {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","class ConnectionLookup {\r\n  /**\r\n   * Utility to add a matching function and a connection type to make it easier to implicitly choose a connection\r\n   * @private\r\n   * @constructor\r\n   */\r\n  constructor() {\r\n    this.connectionsRegistry = [];\r\n  }\r\n\r\n  /**\r\n   * Connection matching callback to identify which connection to use for an implicitly declared source.\r\n   * @callback connectionMatchingCallback\r\n   * @param {string} data - Url, file path, csv data\r\n   * @returns {Connection}\r\n   */\r\n\r\n  /**\r\n   * Add a matching function with a connection instance\r\n   * @private\r\n   * @param {connectionMatchingCallback} matchingFn - Matching function to decide what connection function to invoke\r\n   * @param {Connection} connection - Callback that returns a Connection instance\r\n   */\r\n  addConnection(matchingFn, connection) {\r\n    this.connectionsRegistry.push({\r\n      matchingFn,\r\n      connection,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Find a match for connection based on the input data\r\n   * @private\r\n   * @param {string} data - The data can be an Url, a file path or a csv data blob\r\n   * @returns {object}\r\n   */\r\n  findMatch(data) {\r\n    for (let i = 0; i < this.connectionsRegistry.length; i += 1) {\r\n      if (this.connectionsRegistry[i].matchingFn(data)) {\r\n        return this.connectionsRegistry[i].connection(data);\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n\r\nexport default ConnectionLookup;\r\n","import Connections from './connections';\r\nimport * as JsonToCsv from './utils/json-to-csv';\r\nimport ConnectionMatcher from './connection-matcher';\r\n\r\nconst connectionMatcher = new ConnectionMatcher();\r\n\r\n// url to a table file\r\nconnectionMatcher.addConnection(data => typeof data === 'string' && data.match(/^https?:\\/\\/(.*)$/g), data => new Connections.Web(data));\r\n\r\n// Path to a table file\r\nconnectionMatcher.addConnection(data => typeof data === 'string' && data.match(/^.*\\.(.*)$/g), data => new Connections.File(data));\r\n\r\n// Inline JSON table to csv\r\nconnectionMatcher.addConnection(\r\n  data => data instanceof Array && JsonToCsv.isJson(data),\r\n  data => new Connections.Inline(JsonToCsv.convert(data)),\r\n);\r\n\r\n// Inline csv table\r\nconnectionMatcher.addConnection(data => typeof data === 'string', data => new Connections.Inline(data));\r\n\r\nexport default connectionMatcher;\r\n","import { escapeText } from './utils';\r\n\r\n/**\r\n * Validates supported character sets\r\n * @private\r\n * @param {string} characterSet\r\n * @returns {boolean|string}\r\n */\r\nfunction supportedCharacterSet(characterSet) {\r\n  const validCharacterSets = ['utf8', 'unicode', 'ansi', 'oem', 'mac'];\r\n\r\n  return (validCharacterSets.indexOf(characterSet) > -1 && characterSet)\r\n    || (Number(characterSet).toString() !== 'NaN' && `codepage is ${characterSet}`);\r\n}\r\n\r\n/**\r\n * Get the QIX specific format of a file\r\n * @private\r\n * @param {{ fileExtension: string, headerRowNr: number, delimiter: string, characterSet: string, srcTable: string, noLabels: boolean }} options\r\n * @returns {string}\r\n */\r\nexport default function formatSpecification(options) {\r\n  if (!options) {\r\n    options = {};\r\n  }\r\n\r\n  const formatSpecificationArr = [];\r\n\r\n  if (options.fileExtension) {\r\n    let fileFormat = options.fileExtension;\r\n\r\n    if (fileFormat === 'xlsx') {\r\n      fileFormat = 'ooxml';\r\n    }\r\n\r\n    if (fileFormat === 'csv') {\r\n      fileFormat = 'txt';\r\n    }\r\n\r\n    if (fileFormat === 'htm') {\r\n      fileFormat = 'html';\r\n    }\r\n\r\n    formatSpecificationArr.push(fileFormat);\r\n  }\r\n\r\n  if (options.headerRowNr || options.headerRowNr === 0) {\r\n    formatSpecificationArr.push(`header is ${options.headerRowNr} lines`);\r\n    // Should be included if header row is specified!\r\n    formatSpecificationArr.push('embedded labels');\r\n  }\r\n\r\n  if (options.delimiter) {\r\n    formatSpecificationArr.push(`delimiter is '${options.delimiter}'`);\r\n  }\r\n\r\n  if (options.characterSet && supportedCharacterSet(options.characterSet)) {\r\n    formatSpecificationArr.push(supportedCharacterSet(options.characterSet));\r\n  }\r\n\r\n  if (options.srcTable) {\r\n    formatSpecificationArr.push(`table is \"${escapeText(options.srcTable)}\"`);\r\n  }\r\n\r\n  if (options.noLabels) {\r\n    formatSpecificationArr.push('no labels');\r\n  }\r\n\r\n  let formatSpecificationString = '';\r\n\r\n  if (formatSpecificationArr.length > 0) {\r\n    formatSpecificationString = `\\n(${formatSpecificationArr.join(', ')})`;\r\n  }\r\n\r\n  return formatSpecificationString;\r\n}\r\n","import defaultConnectionMatcher from './default-connection-matcher';\r\nimport formatSpecification from './utils/format-specification';\r\nimport { escapeText, validFieldType, indentation } from './utils/utils';\r\n\r\nclass Table {\r\n  /**\r\n   * Table definition\r\n   * @public\r\n   * @class\r\n   * @param {Connection} connection\r\n   * @param {object} options - Table options\r\n   * @param {string} options.name - Table name\r\n   * @param {Field[]} options.fields - Array of field objects\r\n   * @param {string} options.prefix - Add prefix before the table\r\n   * @param {string} options.section - Section to add table to\r\n   * @constructor\r\n   */\r\n  constructor(connection, options) {\r\n    this.connection = defaultConnectionMatcher.findMatch(connection);\r\n\r\n    options = options || {};\r\n\r\n    if (typeof options === 'string') {\r\n      this.name = options;\r\n      options = {};\r\n    } else {\r\n      this.name = options.name;\r\n      this.fields = options.fields;\r\n      this.prefix = options.prefix;\r\n      if (options.section) {\r\n        this.section = options.section;\r\n      }\r\n    }\r\n\r\n    this.options = options;\r\n  }\r\n\r\n  /**\r\n   * @typedef Field\r\n   * @public\r\n   * @property {string} src - Name in the data source of the field\r\n   * @property {string} name - Name after reload\r\n   * @property {string} type - Date, Time, TimeStamp\r\n   * @property {string} inputFormat - Input format to explain how a field should be parsed.\r\n   * @property {string} displayFormat - Display format that should be used after reload.\r\n   * @property {string} expr - Customize how this field should be loaded with Qlik Script.\r\n   */\r\n  /**\r\n   * Get the fields from a table\r\n   * @public\r\n   * @returns {Field[]} Array of fields\r\n   */\r\n  getFields() {\r\n    return this.fields;\r\n  }\r\n\r\n  /**\r\n   * Get the script representation of the field list. If nothing is specified than all the fields will be returned.\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getFieldList() {\r\n    if (this.fields) {\r\n      return this.fields.map((field) => {\r\n        let formattedInput = `\"${escapeText(field.src || '')}\"`;\r\n\r\n        if (validFieldType(field.type)) {\r\n          const format = field.type.toUpperCase();\r\n\r\n          if (field.inputFormat) {\r\n            formattedInput = `${format}#(${formattedInput}, '${field.inputFormat}')`;\r\n          }\r\n\r\n          if (field.displayFormat) {\r\n            formattedInput = `${format}(${formattedInput}, '${field.displayFormat}')`;\r\n          } else {\r\n            formattedInput = `${format}(${formattedInput})`;\r\n          }\r\n        }\r\n\r\n        if (field.expr) {\r\n          formattedInput = field.expr;\r\n        }\r\n\r\n\r\n        if (!(field.name || field.src)) {\r\n          throw (new Error(`A name or src needs to specified on the field: ${JSON.stringify(field)}`));\r\n        }\r\n\r\n        return `${indentation() + formattedInput} AS \"${escapeText(field.name || field.src)}\"`;\r\n      }).join(',\\n');\r\n    }\r\n\r\n    return '*';\r\n  }\r\n\r\n  /**\r\n   * Is the table used as a proceeding load\r\n   * @public\r\n   * @returns {boolean}\r\n   */\r\n  isProceedingLoad() {\r\n    return this.connection instanceof Table;\r\n  }\r\n\r\n  /**\r\n   * Returns the specified prefix of the table if it exists.\r\n   * The prefix can be for instance be a Qlik script snippet that always should be executed before the table is loaded.\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getPrefix() {\r\n    if (this.prefix) {\r\n      return `${this.prefix}\\n`;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Get the script representation of the table\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getScript() {\r\n    // In the future this could be moved into a connectionMatcher\r\n    // but for sake of clarity it is kept inline.\r\n    if (this.isProceedingLoad()) {\r\n      return `${this.getPrefix()}LOAD\\n${this.getFieldList()};\\n${this.connection.getScript()}`;\r\n    }\r\n\r\n    // Hack!\r\n    if (this.connection.getFileExtension) {\r\n      this.options.fileExtension = this.connection.getFileExtension();\r\n    }\r\n\r\n    return `${this.getPrefix()}LOAD\\n${this.getFieldList()}\\n${this.connection.getScript()}${formatSpecification(this.options)};`;\r\n  }\r\n\r\n  /**\r\n   * Get the name of the table\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getName() {\r\n    return this.name || '';\r\n  }\r\n\r\n  /**\r\n   * Get the section that the table belongs to\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getSection() {\r\n    return this.section;\r\n  }\r\n\r\n  /**\r\n   * Returns the connection or table that the table uses.\r\n   * @public\r\n   * @returns {(Connection|Table)} Connection or Table\r\n   */\r\n  getConnection() {\r\n    return this.connection;\r\n  }\r\n}\r\n\r\nexport default Table;\r\n","/**\r\n * @constant\r\n * @type {{timestamp: string, date: string, time: string, interval: string}}\r\n */\r\nconst qTypes = {\r\n  timestamp: 'TS',\r\n  date: 'D',\r\n  time: 'T',\r\n  interval: 'IV',\r\n};\r\n\r\n/**\r\n * @constant\r\n * @type {{timestamp: string, text: string, numeric: string}}\r\n */\r\nconst qDimensionType = {\r\n  timestamp: 'T',\r\n  text: 'D',\r\n  numeric: 'N',\r\n};\r\n\r\nexport default {\r\n  qTypes,\r\n  qDimensionType,\r\n};\r\n","import hyperCubeSpecification from './hyper-cube-specification';\r\n\r\nconst DEFAULT_DELIMITER = ',';\r\n\r\n/**\r\n * If a dimension has mixed types\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {boolean}\r\n */\r\nfunction isDimensionTypeMixed(dimension) {\r\n  return (\r\n    dimension.qDimensionType === hyperCubeSpecification.qDimensionType.numeric\r\n    && dimension.qTags.length === 0\r\n  );\r\n}\r\n\r\n/**\r\n * Is dimension type a text\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {boolean}\r\n */\r\nfunction isDimensionTypeText(dimension) {\r\n  return dimension.qDimensionType === hyperCubeSpecification.qDimensionType.text;\r\n}\r\n\r\n/**\r\n * Is dimension type a timestamp\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {boolean}\r\n */\r\nfunction isDimensionTypeTimestamp(dimension) {\r\n  if (dimension.qDimensionType === hyperCubeSpecification.qDimensionType.timestamp) {\r\n    return true;\r\n  }\r\n  if (\r\n    dimension.qDimensionType === hyperCubeSpecification.qDimensionType.numeric\r\n    && dimension.qNumFormat.qType === hyperCubeSpecification.qTypes.timestamp\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Is dimension type a date\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {boolean}\r\n */\r\nfunction isDimensionTypeDate(dimension) {\r\n  if (\r\n    dimension.qDimensionType === hyperCubeSpecification.qDimensionType.numeric\r\n    && dimension.qNumFormat.qType === hyperCubeSpecification.qTypes.date\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Is dimension type a time\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {boolean}\r\n */\r\nfunction isDimensionTypeTime(dimension) {\r\n  if (\r\n    dimension.qDimensionType === hyperCubeSpecification.qDimensionType.numeric\r\n    && dimension.qNumFormat.qType === hyperCubeSpecification.qTypes.time\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Is dimension type an interval\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {boolean}\r\n */\r\nfunction isDimensionTypeInterval(dimension) {\r\n  if (\r\n    dimension.qDimensionType === hyperCubeSpecification.qDimensionType.numeric\r\n    && dimension.qNumFormat.qType === hyperCubeSpecification.qTypes.interval\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Get dimension type where the dimension matches one of the following text, mixed, timestamp, time, data, interval or num.\r\n * @private\r\n * @param {QAE.NxDimension} dimension\r\n * @returns {string}\r\n */\r\nexport function getDimensionType(dimension) {\r\n  if (isDimensionTypeText(dimension)) {\r\n    return 'text';\r\n  }\r\n  if (isDimensionTypeMixed(dimension)) {\r\n    return 'mixed';\r\n  }\r\n  if (isDimensionTypeTimestamp(dimension)) {\r\n    return 'timestamp';\r\n  }\r\n  if (isDimensionTypeTime(dimension)) {\r\n    return 'time';\r\n  }\r\n  if (isDimensionTypeDate(dimension)) {\r\n    return 'date';\r\n  }\r\n  if (isDimensionTypeInterval(dimension)) {\r\n    return 'interval';\r\n  }\r\n  return 'num';\r\n}\r\n\r\n/**\r\n * Is numeric dimension type\r\n * @private\r\n * @param {string} dimensionType\r\n * @returns {boolean}\r\n */\r\nfunction isNumericDimensionType(dimensionType) {\r\n  const numericDimensionTypes = [\r\n    'timestamp',\r\n    'interval',\r\n    'time',\r\n    'date',\r\n    'num',\r\n  ];\r\n  dimensionType = dimensionType || '';\r\n  return numericDimensionTypes.indexOf(dimensionType.toLowerCase()) > -1;\r\n}\r\n\r\n/**\r\n * Is field numeric\r\n * @private\r\n * @param {QAE.NxField} field\r\n * @returns {boolean}\r\n */\r\nfunction storeNumeric(field) {\r\n  if (field.type === 'measure') {\r\n    return true;\r\n  }\r\n  if (\r\n    field.type === 'dimension' && isNumericDimensionType(field.dimensionType)\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Check if field is a dual value\r\n * @private\r\n * @param {Field} field\r\n * @returns {boolean}\r\n */\r\nexport function checkIfFieldIsDual(field) {\r\n  return field.type === 'dimension' && field.dimensionType === 'num';\r\n}\r\n\r\n/**\r\n * Has cell a dual value\r\n * @private\r\n * @param {QAE.NxCell} cell\r\n * @param {Field} field\r\n * @returns {boolean}\r\n */\r\nexport function isCellDual(cell, field) {\r\n  return checkIfFieldIsDual(field) && cell.qText !== Number(cell.qNum).toString();\r\n}\r\n\r\n/**\r\n * Escape string containing delimiter\r\n * @private\r\n * @param {string} string\r\n * @param {string} delimiter\r\n * @returns {string}\r\n */\r\nfunction escapeStringContainingDelimiter(string, delimiter) {\r\n  if (string.indexOf(delimiter) > -1 || string.indexOf('\\n') > -1) {\r\n    return `'${string.replace(/'/g, \"''\").replace(/\\n/g, ' ')}'`;\r\n  }\r\n  return string;\r\n}\r\n\r\n/**\r\n * Get the numeric from cell value\r\n * @private\r\n * @param {QAE.NxCell} cell\r\n * @returns {number}\r\n */\r\nfunction getNumericCellValue(cell) {\r\n  return cell.qNum;\r\n}\r\n\r\n/**\r\n * Get the text from a cell value\r\n * @private\r\n * @param {QAE.NxCell} cell\r\n * @returns {string}\r\n */\r\nfunction getTextCellValue(cell) {\r\n  return escapeStringContainingDelimiter(cell.qText, DEFAULT_DELIMITER);\r\n}\r\n\r\n/**\r\n * Get the value of a cell\r\n * @private\r\n * @param {QAE.NxCell} cell\r\n * @param {Field} field\r\n * @returns {(string|number)}\r\n */\r\nexport function getCellValue(cell, field) {\r\n  if (storeNumeric(field)) {\r\n    return getNumericCellValue(cell);\r\n  }\r\n  return getTextCellValue(cell);\r\n}\r\n\r\n/**\r\n * Get dual data row\r\n * @private\r\n * @param {QAE.NxCell} cell\r\n * @returns {string}\r\n */\r\nexport function getDualDataRow(cell) {\r\n  return `${cell.qNum}${DEFAULT_DELIMITER}${escapeStringContainingDelimiter(cell.qText, DEFAULT_DELIMITER)}`;\r\n}\r\n\r\n/**\r\n * Get dual headers from a field\r\n * @private\r\n * @param {Field} field\r\n * @returns {string}\r\n */\r\nexport function getDualHeadersForField(field) {\r\n  return `${field.name}${DEFAULT_DELIMITER}${field.name}_qText}`;\r\n}\r\n","import Table from './table';\r\nimport { validFieldType } from './utils/utils';\r\nimport * as HyperCubeUtils from './utils/hyper-cube-utils';\r\n\r\nclass HyperCube {\r\n  /**\r\n   * Hypercube representation\r\n   * @public\r\n   * @class\r\n   * @param {object} hyperCubeLayout - The QIX representation of a hypercube\r\n   * @param {object} options - Hypercube options\r\n   * @param {string} name - Name\r\n   * @param {string} section - Section to add hypercube data to\r\n   * @constructor\r\n   */\r\n  constructor(hyperCubeLayout, options) {\r\n    this.items = [];\r\n    this.fields = [];\r\n    this.hyperCubeLayout = this.validateHyperCubeLayout(hyperCubeLayout);\r\n\r\n    options = options || {};\r\n\r\n    if (typeof options === 'string') {\r\n      this.name = options;\r\n      options = {};\r\n    } else {\r\n      this.name = options.name;\r\n      if (options.section) {\r\n        this.section = options.section;\r\n      }\r\n    }\r\n\r\n    this.parseHyperCubeLayout(options);\r\n\r\n    this.options = options;\r\n  }\r\n\r\n  /**\r\n   * Validate the hypercube layout\r\n   * @private\r\n   * @param {object} hyperCubeLayout\r\n   * @returns {object} hyperCubeLayout\r\n   */\r\n  validateHyperCubeLayout(hyperCubeLayout) {\r\n    if (!hyperCubeLayout) { throw new Error('Hyper cube layout is undefined'); }\r\n    if (!hyperCubeLayout.qDimensionInfo) { throw new Error('qDimensionInfo is undefined'); }\r\n    if (!hyperCubeLayout.qMeasureInfo) { throw new Error('qMeasureInfo is undefined'); }\r\n    if (hyperCubeLayout.qMode === 'P') { throw new Error('Cannot add hyper cube in pivot mode, qMode:P(DATA_MODE_PIVOT) is not supported'); }\r\n    if (hyperCubeLayout.qMode === 'K') { throw new Error('Cannot add hyper cube in stacked mode, qMode:K(DATA_MODE_PIVOT_STACK) is not supported'); }\r\n    if (hyperCubeLayout.qMode === 'S') {\r\n      this.validateDataPages(hyperCubeLayout.qDataPages);\r\n      this.validateDataPagesCoverage(hyperCubeLayout.qDataPages, hyperCubeLayout);\r\n      return hyperCubeLayout;\r\n    }\r\n    throw new Error('HyperCubeLayout is not valid');\r\n  }\r\n\r\n  /**\r\n   * Validates the datapages of the hypercube\r\n   * @private\r\n   * @param {object} dataPages\r\n   */\r\n  validateDataPages(dataPages) {\r\n    if (!dataPages) {\r\n      throw new Error('qDataPages are undefined');\r\n    }\r\n\r\n    if (dataPages[0].qArea && dataPages[0].qArea.qTop > 0) {\r\n      throw new Error('qDataPages first page should start at qTop: 0.');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validates that all datapages in the hypercube is covered\r\n   * @private\r\n   * @param {object[]} dataPages\r\n   * @param {object} hyperCubeLayout\r\n   */\r\n  validateDataPagesCoverage(dataPages, hyperCubeLayout) {\r\n    let qHeight = 0;\r\n\r\n    dataPages.forEach((dataPage) => {\r\n      this.validateQMatrix(dataPage);\r\n      this.validateQArea(dataPage, hyperCubeLayout, qHeight);\r\n      qHeight += dataPage.qArea.qHeight;\r\n    }, this);\r\n\r\n    if (hyperCubeLayout.qSize.qcy !== qHeight) {\r\n      throw new Error('qDataPages are missing pages.');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validates the QMatrix in the datapage\r\n   * @private\r\n   * @param {object} dataPage\r\n   */\r\n  validateQMatrix(dataPage) {\r\n    if (!dataPage.qMatrix) {\r\n      throw new Error('qMatrix of qDataPages are undefined');\r\n    }\r\n    if (dataPage.qMatrix.length === 0) {\r\n      throw new Error('qDataPages are empty');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validates the QArea in the datapage\r\n   * @private\r\n   * @param {object} dataPage\r\n   * @param {object} hyperCubeLayout\r\n   * @param {number} qHeight\r\n   */\r\n  validateQArea(dataPage, hyperCubeLayout, qHeight) {\r\n    if (!dataPage.qArea) {\r\n      throw new Error('qArea of qDataPages are undefined');\r\n    }\r\n    if (dataPage.qArea.qLeft > 0) {\r\n      throw new Error('qDataPages have data pages that\\'s not of full qWidth.');\r\n    }\r\n    if (dataPage.qArea.qWidth < hyperCubeLayout.qSize.qcx) {\r\n      throw new Error('qDataPages have data pages that\\'s not of full qWidth.');\r\n    }\r\n    if (dataPage.qArea.qTop < qHeight) {\r\n      throw new Error('qDataPages have overlapping data pages.');\r\n    }\r\n    if (dataPage.qArea.qTop > qHeight) {\r\n      throw new Error('qDataPages are missing pages.');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parses the hypercube an extracts the data\r\n   * @private\r\n   */\r\n  parseHyperCubeLayout() {\r\n    const that = this;\r\n    that.fields = that.getFieldsFromHyperCubeLayout();\r\n    that.data = that.getDataFromHyperCubeLayout();\r\n    const inlineData = `${that.fields\r\n      .map(field => field.name)\r\n      .join(',')}\\n${this.data}`;\r\n    let hasDual = false;\r\n    that.fields.forEach((field) => {\r\n      if (field.isDual) {\r\n        hasDual = true;\r\n        that.items.push(that.getMapTableForDualField(field));\r\n      }\r\n    });\r\n    const options = {\r\n      name: that.name,\r\n      fields: that.getFieldsDefinition(that.fields),\r\n    };\r\n    if (that.section && !hasDual) {\r\n      options.section = that.section;\r\n    }\r\n    that.items.push(new Table(inlineData, options));\r\n  }\r\n\r\n  /**\r\n   * Get the Fields definition\r\n   * @private\r\n   * @param {object[]} fields\r\n   * @returns {object[]} fields\r\n   */\r\n  getFieldsDefinition(fields) {\r\n    return fields.map((field) => {\r\n      const mappedField = { name: field.name };\r\n      if (validFieldType(field.dimensionType)) {\r\n        mappedField.type = field.dimensionType;\r\n        mappedField.displayFormat = field.displayFormat;\r\n      }\r\n      if (field.isDual) {\r\n        mappedField.expr = `Dual(ApplyMap('MapDual__${field.name}', \"${field.name}\"), \"${field.name}\")`;\r\n      } else {\r\n        mappedField.src = field.name;\r\n      }\r\n      return mappedField;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Return qmatrix with dual fields\r\n   * @private\r\n   * @param {object} qMatrix\r\n   * @param {object} field\r\n   * @returns {object} field\r\n   */\r\n  mapDualFieldQMatrix(qMatrix, field) {\r\n    function uniqueFilter(value, index, self) {\r\n      return self.indexOf(value) === index;\r\n    }\r\n    return qMatrix\r\n      .map(row => HyperCubeUtils.getDualDataRow(row[field.index]))\r\n      .filter(uniqueFilter);\r\n  }\r\n\r\n  /**\r\n   * Get table with dual fields\r\n   * @private\r\n   * @param {object} field\r\n   * @returns {object} Table\r\n   */\r\n  getMapTableForDualField(field) {\r\n    const that = this;\r\n    const concatQMatrix = that.hyperCubeLayout.qDataPages.reduce(\r\n      (prev, curr) => [...prev, ...curr.qMatrix],\r\n      [],\r\n    );\r\n    const data = that.mapDualFieldQMatrix(concatQMatrix, field);\r\n    const headers = HyperCubeUtils.getDualHeadersForField(field);\r\n    const inlineData = `${headers}\\n${data.join('\\n')}`;\r\n    const name = `MapDual__${field.name}`;\r\n    const options = { name, prefix: 'Mapping' };\r\n    if (this.section && this.items.length === 0) {\r\n      options.section = this.section;\r\n    }\r\n    return new Table(inlineData, options);\r\n  }\r\n\r\n  /**\r\n   * Extracts the data from the hypercube layout as a csv representation\r\n   * @private\r\n   * @returns {string}\r\n   */\r\n  getDataFromHyperCubeLayout() {\r\n    const that = this;\r\n    const data = that.hyperCubeLayout.qDataPages\r\n      .map(dataPage => dataPage.qMatrix\r\n        .map(row => row\r\n          .map((cell, index) => {\r\n            const field = that.fields[index];\r\n            if (!field.isDual && HyperCubeUtils.isCellDual(cell, field)) {\r\n              field.isDual = true;\r\n            }\r\n            return HyperCubeUtils.getCellValue(cell, field);\r\n          })\r\n          .join(','))\r\n        .join('\\n'))\r\n      .join('\\n');\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Get the fields from the hypercube\r\n   * @private\r\n   * @returns {{type: string, dimensionType: string, name: string, displayFormat: string, index: number }[]} - An array of dimension and measures\r\n   */\r\n  getFieldsFromHyperCubeLayout() {\r\n    const that = this;\r\n    const fields = [];\r\n    for (let i = 0; i < that.hyperCubeLayout.qDimensionInfo.length; i += 1) {\r\n      fields.push({\r\n        type: 'dimension',\r\n        dimensionType: HyperCubeUtils.getDimensionType(that.hyperCubeLayout.qDimensionInfo[i]),\r\n        name: that.hyperCubeLayout.qDimensionInfo[i].qFallbackTitle,\r\n        displayFormat: that.hyperCubeLayout.qDimensionInfo[i].qNumFormat.qFmt,\r\n        index: i,\r\n      });\r\n    }\r\n    for (let j = 0; j < that.hyperCubeLayout.qMeasureInfo.length; j += 1) {\r\n      fields.push({\r\n        type: 'measure',\r\n        name: that.hyperCubeLayout.qMeasureInfo[j].qFallbackTitle,\r\n        index: that.hyperCubeLayout.qDimensionInfo.length + j,\r\n      });\r\n    }\r\n    return fields;\r\n  }\r\n\r\n  /**\r\n   * Get tables from the hypercube\r\n   * @public\r\n   * @returns {object[]} Tables\r\n   */\r\n  getItems() {\r\n    return this.items;\r\n  }\r\n}\r\n\r\nexport default HyperCube;\r\n","class SetStatement {\r\n  /**\r\n   * Define set statements\r\n   * @class\r\n   * @public\r\n   * @param {object} defaultSetStatements - A representation where each property name will be used as key and the property will be the value\r\n   * @constructor\r\n   */\r\n  constructor(defaultSetStatements) {\r\n    this.defaultSetStatements = defaultSetStatements;\r\n  }\r\n\r\n  /**\r\n   * Get the entire set statement as script\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getScript() {\r\n    return Object.keys(this.defaultSetStatements)\r\n      .map(key => `SET ${key}='${Array.isArray(this.defaultSetStatements[key])\r\n        ? this.defaultSetStatements[key].join(';') : this.defaultSetStatements[key]}';`)\r\n      .join('\\n');\r\n  }\r\n\r\n  /**\r\n   * Always returns the name as empty\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getName() {\r\n    return '';\r\n  }\r\n}\r\n\r\nexport default SetStatement;\r\n","import { getFieldName, escapeText } from './utils/utils';\r\n\r\nclass DerivedFieldsTemplate {\r\n  /**\r\n   * Declare fields that can be derived from a template. An example can be a calendar template.\r\n   * @public\r\n   * @param {object} options - Derived Field Template definition.\r\n   * @param {callback} options.fieldMatchFunction - Matching function that will apply a field template definition.\r\n   * @param {string} options.name - Name of derived field.\r\n   * @param {string} options.fieldTag - What field tag that will be used in the derived field.\r\n   * @param {string} options.derivedFieldDefinition - What script definition should be used in the derived field.\r\n   * @constructor\r\n   */\r\n  constructor(options) {\r\n    this.getFieldFn = options.fieldMatchFunction;\r\n    this.name = options.name;\r\n    this.fieldTag = options.fieldTag;\r\n    this.derivedFieldDefinition = options.derivedFieldDefinition;\r\n  }\r\n\r\n  /**\r\n   * Returns the script\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getScript() {\r\n    const fields = this.getFieldFn() || [];\r\n\r\n    if (fields.length > 0) {\r\n      return this.getDefinition(fields.map(getFieldName));\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Get the script definition for a set of specific fields\r\n   * @public\r\n   * @param {string[]} fieldNames - An array of strings with field names.\r\n   * @returns {string}\r\n   */\r\n  getDefinition(fieldNames) {\r\n    return `\"${escapeText(this.name)}\":\r\nDECLARE FIELD DEFINITION Tagged ('$${this.fieldTag}')\r\nFIELDS\r\n${this.derivedFieldDefinition}\r\nDERIVE FIELDS FROM FIELDS [${fieldNames.join(', ')}] USING \"${escapeText(this.name)}\";`;\r\n  }\r\n}\r\n\r\nexport default DerivedFieldsTemplate;\r\n","import DerivedFieldTemplate from './derived-fields-template';\r\n\r\nconst derivedFieldsDefinition = `Dual(Year($1), YearStart($1)) AS [Year] Tagged ('$axis', '$year'),\r\n  Dual('Q'&Num(Ceil(Num(Month($1))/3)),Num(Ceil(NUM(Month($1))/3),00)) AS [Quarter] Tagged ('$quarter', '$cyclic'),\r\n  Dual(Year($1)&'-Q'&Num(Ceil(Num(Month($1))/3)),QuarterStart($1)) AS [YearQuarter] Tagged ('$yearquarter', '$qualified'),\r\n  Dual('Q'&Num(Ceil(Num(Month($1))/3)),QuarterStart($1)) AS [_YearQuarter] Tagged ('$yearquarter', '$hidden', '$simplified'),\r\n  Month($1) AS [Month] Tagged ('$month', '$cyclic'),\r\n  Dual(Year($1)&'-'&Month($1), monthstart($1)) AS [YearMonth] Tagged ('$axis', '$yearmonth', '$qualified'),\r\n  Dual(Month($1), monthstart($1)) AS [_YearMonth] Tagged ('$axis', '$yearmonth', '$simplified', '$hidden'),\r\n  Dual('W'&Num(Week($1),00), Num(Week($1),00)) AS [Week] Tagged ('$weeknumber', '$cyclic'),\r\n  Date(Floor($1)) AS [Date] Tagged ('$axis', '$date', '$qualified'),\r\n  Date(Floor($1), 'D') AS [_Date] Tagged ('$axis', '$date', '$hidden', '$simplified'),\r\n  If (DayNumberOfYear($1) <= DayNumberOfYear(Today()), 1, 0) AS [InYTD] ,\r\nYear(Today())-Year($1) AS [YearsAgo] ,\r\n  If (DayNumberOfQuarter($1) <= DayNumberOfQuarter(Today()),1,0) AS [InQTD] ,\r\n4*Year(Today())+Ceil(Month(Today())/3)-4*Year($1)-Ceil(Month($1)/3) AS [QuartersAgo] ,\r\nCeil(Month(Today())/3)-Ceil(Month($1)/3) AS [QuarterRelNo] ,\r\n  If(Day($1)<=Day(Today()),1,0) AS [InMTD] ,\r\n12*Year(Today())+Month(Today())-12*Year($1)-Month($1) AS [MonthsAgo] ,\r\nMonth(Today())-Month($1) AS [MonthRelNo] ,\r\n  If(WeekDay($1)<=WeekDay(Today()),1,0) AS [InWTD] ,\r\n(WeekStart(Today())-WeekStart($1))/7 AS [WeeksAgo] ,\r\nWeek(Today())-Week($1) AS [WeekRelNo];`;\r\n\r\n/**\r\n * A field matching callback to identify which fields that are associated with a specific calendarTemplate.\r\n * @callback fieldMatchingCalendarCallback\r\n * @param {string} calendarTemplate\r\n * @param {Field}\r\n */\r\n\r\n/**\r\n * Get the derived field definition for a field that matches the pattern\r\n * @public\r\n * @param {fieldMatchingCalendarCallback} fn - Field matcher function\r\n * @returns {DerivedFieldsTemplate}\r\n */\r\nfunction getCalenderDerivedFieldDefinition(fn) {\r\n  return new DerivedFieldTemplate({\r\n    name: 'autoCalendar',\r\n    fieldTag: 'date',\r\n    derivedFieldDefinition: derivedFieldsDefinition,\r\n    fieldMatchFunction: () => fn(f => f.calendarTemplate),\r\n  });\r\n}\r\n\r\nexport default getCalenderDerivedFieldDefinition;\r\n","import Table from './table';\r\nimport HyperCube from './hyper-cube';\r\nimport Connections from './connections';\r\nimport SetStatement from './set-statement';\r\n\r\nimport * as Utils from './utils/utils';\r\nimport getDerivedFieldDefinition from './calendar-derived-fields';\r\n\r\nconst SCRIPT_BLOCK_SPACING = '\\n\\n';\r\n\r\nclass Halyard {\r\n  /**\r\n   * Representation of tables or hypercubes to load\r\n   * @class\r\n   * @public\r\n   * @constructor\r\n   */\r\n  constructor() {\r\n    this.defaultSetStatements = {};\r\n    this.items = [];\r\n    this.addItem(new SetStatement(this.defaultSetStatements));\r\n    this.lastItems = [getDerivedFieldDefinition(x => this.getFields(x))];\r\n  }\r\n\r\n  /**\r\n   * Get connections object that are used in the model\r\n   * @public\r\n   * @returns {Connection[]}\r\n   */\r\n  getConnections() {\r\n    return this.items.filter(item => item.getConnection).map(item => item.getConnection());\r\n  }\r\n\r\n  /**\r\n   * Get the QIX connections definitions that are used in the model\r\n   * @public\r\n   * @returns {{qName: (string), qConnectionString: (string), qType: (string)}\r\n   */\r\n  getQixConnections() {\r\n    return this.getConnections().map(connection => connection.getQixConnectionObject())\r\n      .filter(connection => connection);\r\n  }\r\n\r\n  /**\r\n   * Field matching callback to identify if a field matches another\r\n   * @callback fieldMatchingCallback\r\n   * @param {Field} field\r\n   * @param {boolean}\r\n   */\r\n\r\n  /**\r\n   * Get fields that matches pattern sent in as params\r\n   * @public\r\n   * @param {fieldMatchingCallback} matcherFn\r\n   * @returns {Field[]}\r\n   */\r\n  getFields(matcherFn) {\r\n    matcherFn = matcherFn || (() => true);\r\n\r\n    const fields = [];\r\n\r\n    this.items.forEach((item) => {\r\n      if (item.getFields && item.getFields()) {\r\n        fields.push(...item.getFields().filter(matcherFn));\r\n      }\r\n    });\r\n\r\n    return fields;\r\n  }\r\n\r\n  /**\r\n   * Configure the default set statements like time, date, currency formats\r\n   * @public\r\n   * @param {SetStatement} defaultSetStatements\r\n   * @param {boolean} preservePreviouslyEnteredValues\r\n   */\r\n  setDefaultSetStatements(defaultSetStatements, preservePreviouslyEnteredValues) {\r\n    const that = this;\r\n\r\n    Object.keys(defaultSetStatements).forEach((key) => {\r\n      if (!(preservePreviouslyEnteredValues && that.defaultSetStatements[key])) {\r\n        that.defaultSetStatements[key] = defaultSetStatements[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the script for a item (table, preceeding load)\r\n   * @public\r\n   * @param {(Table|HyperCube)} item\r\n   * @returns {string}\r\n   */\r\n  getItemScript(item) {\r\n    let itemScript = item.getScript();\r\n\r\n    if (item.getName && item.getName()) {\r\n      if (item.section) {\r\n        itemScript = `///$tab ${Utils.escapeText(item.section)}\\n\"${Utils.escapeText(item.getName())}\":\\n${itemScript}`;\r\n      } else {\r\n        itemScript = `\"${Utils.escapeText(item.getName())}\":\\n${itemScript}`;\r\n      }\r\n    }\r\n\r\n    return itemScript;\r\n  }\r\n\r\n  /**\r\n   * Fetch all script blocks\r\n   * @public\r\n   * @returns {string[]}\r\n   */\r\n  getAllScriptBlocks() {\r\n    return this.items.concat(this.lastItems).filter(item => item.getScript());\r\n  }\r\n\r\n  /**\r\n   * Fetches the entire script\r\n   * @public\r\n   * @returns {string}\r\n   */\r\n  getScript() {\r\n    return this.getAllScriptBlocks().map(item => this.getItemScript(item))\r\n      .join(SCRIPT_BLOCK_SPACING);\r\n  }\r\n\r\n  /**\r\n   * Add hyper cube explicit or implicitly\r\n   * @public\r\n   * @param {Hypercube} arg1 - Hypercube\r\n   * @param {object} options - Hypercube options\r\n   * @param {string} options.name - Name\r\n   * @param {string} options.section - Section to add hypercube data to\r\n   * @returns {Hypercube} Hypercube\r\n   */\r\n  addHyperCube(arg1, options) {\r\n    let newHyperCube;\r\n\r\n    if (arg1 instanceof HyperCube) {\r\n      newHyperCube = arg1;\r\n    } else {\r\n      newHyperCube = new HyperCube(arg1, options);\r\n    }\r\n\r\n    for (let i = 0; i < newHyperCube.items.length; i += 1) {\r\n      this.checkIfItemNameExists(newHyperCube.items[i]);\r\n    }\r\n\r\n    for (let i = 0; i < newHyperCube.items.length; i += 1) {\r\n      this.addItem(newHyperCube.items[i]);\r\n    }\r\n\r\n    return newHyperCube;\r\n  }\r\n\r\n  /**\r\n   * Support to add table explicit or implicitly\r\n   * @public\r\n   * @param {Table} arg1 - Table\r\n   * @param {object} options\r\n   * @param {string} options.name - Table name\r\n   * @param {Field[]} options.fields - Array of field objects\r\n   * @param {string} options.prefix - Add prefix before the table\r\n   * @param {string} options.section - Section to add table to\r\n   * @returns {object} Table\r\n   */\r\n  addTable(arg1, options) {\r\n    let newTable;\r\n\r\n    if (arg1 instanceof Table) {\r\n      newTable = arg1;\r\n    } else {\r\n      newTable = new Table(arg1, options);\r\n    }\r\n\r\n    return this.addItem(newTable);\r\n  }\r\n\r\n  /**\r\n   * Verify that item doesn't exist in model\r\n   * @public\r\n   * @param {(Table|Hypercube)} newItem - Table or Hypercube\r\n   */\r\n  checkIfItemNameExists(newItem) {\r\n    if (newItem.getName && newItem.getName()) {\r\n      if (this.items.filter(item => item.getName() === newItem.getName()).length > 0) {\r\n        throw new Error('Cannot add another table with the same name.');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add new item to the model\r\n   * @public\r\n   * @param {(Table|Hypercube)} newItem - Table or Hypercube\r\n   * @returns {(Table|Hypercube)} - Table or Hypercube\r\n   */\r\n  addItem(newItem) {\r\n    this.checkIfItemNameExists(newItem);\r\n\r\n    this.items.push(newItem);\r\n\r\n    return newItem;\r\n  }\r\n\r\n  /**\r\n   * Locate which item that generated a script at the specified character position\r\n   * @public\r\n   * @param {number} charPosition\r\n   * @returns {(Table|Hypercube)} - Table or Hypercube\r\n   */\r\n  getItemThatGeneratedScriptAt(charPosition) {\r\n    const allScriptBlocks = this.getAllScriptBlocks();\r\n    let scriptBlockStartPosition = 0;\r\n\r\n    for (let i = 0; i < allScriptBlocks.length; i += 1) {\r\n      const itemScript = this.getItemScript(allScriptBlocks[i]);\r\n      const scriptBlockEndPosition = scriptBlockStartPosition\r\n          + (`${itemScript}${SCRIPT_BLOCK_SPACING}`).length;\r\n\r\n      if (scriptBlockStartPosition <= charPosition && charPosition <= scriptBlockEndPosition) {\r\n        return allScriptBlocks[i];\r\n      }\r\n\r\n      scriptBlockStartPosition = scriptBlockEndPosition;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n}\r\n\r\nHalyard.Table = Table;\r\n\r\nHalyard.HyperCube = HyperCube;\r\n\r\nHalyard.Connections = Connections;\r\n\r\nexport default Halyard;\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Halyard;\r\n}\r\n"],"names":["Utils.folderPath","Utils.fileName","Utils.fileExtension","Utils.escapeText","WebConnection","ConnectionMatcher","JsonToCsv.isJson","JsonToCsv.convert","defaultConnectionMatcher","HyperCubeUtils.getDualDataRow","HyperCubeUtils.getDualHeadersForField","HyperCubeUtils.isCellDual","HyperCubeUtils.getCellValue","HyperCubeUtils.getDimensionType","DerivedFieldTemplate","getDerivedFieldDefinition"],"mappings":"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"}