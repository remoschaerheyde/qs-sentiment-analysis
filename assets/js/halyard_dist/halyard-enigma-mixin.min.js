!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t,n){return{type:e,message:t.message||t.qErrorString,item:n,qixError:t}}const t={types:"Global",init(e){e.config?e.api.Promise=e.config.Promise:e.api.Promise=e.Promise},extend:{createSessionAppUsingHalyard(e){const t=this;return t.createSessionApp().then(n=>t.setScriptAndReloadWithHalyard(n,e,!1))},createAppUsingHalyard(e,t){const n=this;return n.createApp(e).then(e=>{const o=e.qAppId;return n.openDoc(o).then(e=>n.setScriptAndReloadWithHalyard(e,t,!0))})},reloadAppUsingHalyard(e,t,n){const o=this;return o.openDoc(e).catch(t=>{return n&&1003===t.code?o.createApp(e).then(e=>o.openDoc(e.qAppId)):o.Promise.reject(t)}).then(e=>o.setScriptAndReloadWithHalyard(e,t,!0))},setScriptAndReloadWithHalyard(t,n,o){const a=[];return n.getConnections().forEach(n=>{const o=n.getQixConnectionObject();if(o){const r=t.createConnection(o).then(e=>e,t=>{if(!t.code||2e3!==t.code)throw e("Connection Error",t,n)});a.push(r)}}),this.Promise.all(a).then(()=>t.getLocaleInfo().then(a=>(n.setDefaultSetStatements({ThousandSep:(r=a).qThousandSep,DecimalSep:r.qDecimalSep,MoneyThousandSep:r.qMoneyThousandSep,MoneyDecimalSep:r.qMoneyDecimalSep,MoneyFormat:r.qMoneyFmt,TimeFormat:r.qTimeFmt,DateFormat:r.qDateFmt,TimestampFormat:r.qTimestampFmt,FirstWeekDay:r.qFirstWeekDay,ReferenceDay:r.qReferenceDay,FirstMonthOfYear:r.qFirstMonthOfYear,CollationLocale:r.qCollation,MonthNames:r.qCalendarStrings.qMonthNames,LongMonthNames:r.qCalendarStrings.qLongMonthNames,DayNames:r.qCalendarStrings.qDayNames,LongDayNames:r.qCalendarStrings.qLongDayNames},!0),t.globalApi.configureReload(!0,!0,!1).then(()=>t.setScript(n.getScript()).then(()=>t.doReload().then(()=>t.globalApi.getProgress(0).then(a=>0!==a.qErrorData.length?t.checkScriptSyntax().then(t=>{if(0===t.length)throw e("Loading Error",a.qErrorData[0]);{const o=n.getItemThatGeneratedScriptAt(t[0].qTextPos);throw e("Syntax Error",a.qErrorData[0],o)}}):o?t.doSave().then(()=>t):t)))))));var r}}},n={types:"Doc",init(e){const t={handle:-1,id:"Global",type:"Global"};e.config?t.genericType="Global":(t.customType="Global",t.delta=!0),e.api.globalApi=e.api.session.getObjectApi(t)}};module.exports=[t,n]});
//# sourceMappingURL=halyard-enigma-mixin.min.js.map
